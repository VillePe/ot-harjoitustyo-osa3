{"version":3,"sources":["components/Person.js","components/App215.js","index.js"],"names":["Person","_ref","person","delFunc","modifyFunc","react_default","a","createElement","name","number","id","onClick","toString","database","App","props","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","newPerson","setNewPerson","useEffect","axios","get","then","response","data","delPerson","event","target","console","log","delete","concat","filter","p","modifyPerson","find","put","map","onChange","value","toUpperCase","includes","putResponse","post","postResponse","components_Person","key","ReactDOM","render","App215","document","getElementById"],"mappings":"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","file":"static/js/main.4813a16e.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({person, delFunc, modifyFunc}) => {\r\n    return (\r\n        <div>\r\n            <li>{person.name} {person.number} <button id={person.id} onClick={delFunc}>Delete</button><button id={person.id.toString()} onClick={modifyFunc}>Modify</button></li>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Person","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport Person from './Person'\r\n\r\nconst database = \"/api/persons\";\r\n\r\nconst App = (props) => {\r\n    const [persons, setPersons] = useState([]);\r\n    const [newPerson, setNewPerson] = useState([]);\r\n\r\n    useEffect(() => {\r\n        axios\r\n            .get(database)\r\n            .then(response => {\r\n                setPersons(response.data);\r\n            })\r\n    }, [])\r\n\r\n    const delPerson = (event) => {\r\n        const id = event.target.id;\r\n        console.log(\"To be deleted...\", id);\r\n        axios.delete(`${database}/${id}`).then(response => {\r\n            setPersons(persons.filter(p => p.id !== id));\r\n            console.log(id, \"deleted!\");\r\n        })\r\n    }\r\n\r\n    const modifyPerson = (event) => {\r\n        const id = event.target.id;\r\n        const person = persons.find(p => p.id.toString() === id);\r\n        console.log(person);\r\n        axios.put(`${database}/${id}`, person).then(response => {\r\n            console.log(\"Response\", response.data);\r\n            setPersons(persons.map(p => p.id !== id ? p : response.data))\r\n        });\r\n    }\r\n\r\n    const rows = () => persons.map(person =>\r\n        <Person\r\n            key={person.id}\r\n            person={person}\r\n            delFunc={delPerson}\r\n            modifyFunc={modifyPerson}\r\n        />\r\n    )\r\n\r\n    const addPerson = () => {\r\n        console.log(newPerson);\r\n        axios.get(database).then(response => {\r\n            const person = response.data.find(p => p.name === newPerson.name);\r\n            if (person) {\r\n                // If the person is already in the database, change the number for them\r\n                axios.put(`${database}/${person.id}`, newPerson).then(putResponse => {\r\n                    console.log(response.data);\r\n                    setPersons(persons.map(p => {\r\n                        return p.id !== putResponse.data.id ? p : putResponse.data\r\n                    }));\r\n                })                \r\n            } else {\r\n                // If person is not in database, add a new one\r\n                axios.post(database, newPerson).then(postResponse => {\r\n                    console.log(postResponse.data)\r\n                    setPersons(persons.concat(postResponse.data));\r\n                })\r\n            }\r\n        })\r\n    }\r\n\r\n    const onNewPersonNameChange = (event) => {\r\n        setNewPerson({ name: event.target.value, number: newPerson.number });\r\n    }\r\n    const onNewPersonNumberChange = (event) => {\r\n        setNewPerson({ name: newPerson.name, number: event.target.value });\r\n    }\r\n\r\n    const filterOnChange = (event) => {\r\n        const value = event.target.value;\r\n        axios\r\n            .get(database)\r\n            .then(response => {\r\n                console.log(value);\r\n                setPersons(response.data.filter(p => p.name.toUpperCase().includes(value.toUpperCase())))\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div>APP215\r\n            <h1>Phonebook</h1>\r\n            <div>Filter shown with <input onChange={filterOnChange} /></div>\r\n            <h2>Add new</h2>\r\n            <div>Name <input onChange={onNewPersonNameChange} /></div>\r\n            <div>Number <input onChange={onNewPersonNumberChange} /></div>\r\n            <div><button onClick={addPerson}>Add</button></div>\r\n            <h2>Numbers</h2>\r\n            <ul>{rows()}</ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App215';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}