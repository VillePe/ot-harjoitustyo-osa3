{"version":3,"sources":["components/Person.js","components/Notification.js","components/App215.js","index.js"],"names":["Person","_ref","person","delFunc","modifyFunc","react_default","a","createElement","name","number","id","onClick","toString","Notification","message","length","className","database","App","props","_useState","useState","_useState2","Object","slicedToArray","persons","setPersons","_useState3","_useState4","newPerson","setNewPerson","_useState5","_useState6","error","setError","useEffect","axios","get","then","response","data","delPerson","event","target","console","log","delete","concat","filter","p","modifyPerson","find","put","map","components_Notification","onChange","value","toUpperCase","includes","putResponse","post","postResponse","catch","setTimeout","components_Person","key","ReactDOM","render","App215","document","getElementById"],"mappings":"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","file":"static/js/main.74f41460.chunk.js","sourcesContent":["import React from 'react'\r\n\r\nconst Person = ({person, delFunc, modifyFunc}) => {\r\n    return (\r\n        <div>\r\n            <li>{person.name} {person.number} <button id={person.id} onClick={delFunc}>Delete</button><button id={person.id.toString()} onClick={modifyFunc}>Modify</button></li>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default Person","import React from 'react'\r\n\r\nconst Notification = ({message}) => {\r\n    if (message === null || message.length === 0) {\r\n        return null;\r\n    }\r\n    return (\r\n        <div className=\"error\">{message}</div>\r\n    )\r\n}\r\n\r\nexport default Notification","import React, { useState, useEffect } from 'react'\r\nimport axios from 'axios'\r\nimport Person from './Person'\r\nimport Notification from './Notification'\r\n\r\nconst database = \"/api/persons\";\r\n\r\nconst App = (props) => {\r\n    const [persons, setPersons] = useState([]);\r\n    const [newPerson, setNewPerson] = useState([]);\r\n    const [error, setError] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        axios\r\n            .get(database)\r\n            .then(response => {\r\n                setPersons(response.data);\r\n            })\r\n    }, [])\r\n\r\n    const delPerson = (event) => {\r\n        const id = event.target.id;\r\n        console.log(\"To be deleted...\", id);\r\n        axios.delete(`${database}/${id}`).then(response => {\r\n            setPersons(persons.filter(p => p.id !== id));\r\n            console.log(id, \"deleted!\");\r\n        })\r\n    }\r\n\r\n    const modifyPerson = (event) => {\r\n        const id = event.target.id;\r\n        const person = persons.find(p => p.id.toString() === id);\r\n        console.log(person);\r\n        axios.put(`${database}/${id}`, person).then(response => {\r\n            console.log(\"Response\", response.data);\r\n            setPersons(persons.map(p => p.id !== id ? p : response.data))\r\n        });\r\n    }\r\n\r\n    const rows = () => persons.map(person =>\r\n        <Person\r\n            key={person.id}\r\n            person={person}\r\n            delFunc={delPerson}\r\n            modifyFunc={modifyPerson}\r\n        />\r\n    )\r\n\r\n    const addPerson = () => {\r\n        console.log(newPerson);\r\n        axios.get(database).then(response => {\r\n            const person = response.data.find(p => p.name === newPerson.name);\r\n            if (person) {\r\n                // If the person is already in the database, change the number for them\r\n                axios.put(`${database}/${person.id}`, newPerson).then(putResponse => {\r\n                    console.log(response.data);\r\n                    setPersons(persons.map(p => {\r\n                        return p.id !== putResponse.data.id ? p : putResponse.data\r\n                    }));\r\n                })\r\n            } else {\r\n                // If person is not in database, add a new one\r\n                axios.post(database, newPerson)\r\n                    .then(postResponse => {\r\n                        console.log(postResponse.data)\r\n                        setPersons(persons.concat(postResponse.data));\r\n                    }).catch(error => {\r\n                        setError(error.response.data.error);\r\n                        setTimeout(() => {\r\n                            setError(null);\r\n                        }, 3000)\r\n                    })\r\n            }\r\n        })\r\n    }\r\n\r\n    const onNewPersonNameChange = (event) => {\r\n        setNewPerson({ name: event.target.value, number: newPerson.number });\r\n    }\r\n    const onNewPersonNumberChange = (event) => {\r\n        setNewPerson({ name: newPerson.name, number: event.target.value });\r\n    }\r\n\r\n    const filterOnChange = (event) => {\r\n        const value = event.target.value;\r\n        axios\r\n            .get(database)\r\n            .then(response => {\r\n                console.log(value);\r\n                setPersons(response.data.filter(p => p.name.toUpperCase().includes(value.toUpperCase())))\r\n            })\r\n    }\r\n\r\n    return (\r\n        <div>APP215\r\n            <h1>Phonebook</h1>\r\n            <Notification message={error} />\r\n            <div>Filter shown with <input onChange={filterOnChange} /></div>\r\n            <h2>Add new</h2>\r\n            <div>Name <input onChange={onNewPersonNameChange} /></div>\r\n            <div>Number <input onChange={onNewPersonNumberChange} /></div>\r\n            <div><button onClick={addPerson}>Add</button></div>\r\n            <h2>Numbers</h2>\r\n            <ul>{rows()}</ul>\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default App","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App215';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}